# IDSS Agent Configuration

# Product-specific terminology
terminology:
  product_name: "vehicle"           # Singular form: "vehicle", "property", "product"
  product_plural: "vehicles"        # Plural form: "vehicles", "properties", "products"
  product_role: "car salesperson"   # Agent role: "car salesperson", "real estate agent", "sales assistant"
  identifier_name: "VIN"            # Unique identifier: "VIN", "MLS#", "SKU"
  search_action: "searching for available vehicles"  # Action description
  recommendation_action: "recommending vehicles"     # Recommendation description

# LLM Models for each component
models:
  intent_classifier:
    name: "gpt-5-mini"
    temperature: 0
    max_tokens: 

  semantic_parser:
    name: "gpt-5.1"
    temperature: 0
    max_tokens: 

  interview:
    name: "gpt-4o"
    temperature: 0.7
    max_tokens: 

  interview_extraction:
    name: "gpt-4o-mini"
    temperature: 0
    max_tokens: 

  discovery:
    name: "gpt-4o"
    temperature: 0.7
    max_tokens: 

  discovery_extraction:
    name: "gpt-4o-mini"
    temperature: 0
    max_tokens: 

  analytical:
    name: "gpt-4o"
    temperature: 0
    max_tokens: 

  analytical_postprocess:
    name: "gpt-4o-mini"
    temperature: 0.7
    max_tokens: 

  general:
    name: "gpt-4o-mini"
    temperature: 0.7
    max_tokens: 

# System limits and constraints
limits:
  max_recommended_items: 20          # Maximum items in recommendation list
  max_conversation_history: 10       # Maximum messages to keep in context (interview mode)
  max_interview_questions: 3         # Maximum interview turns before forcing recommendation
  max_vehicle_summary_chars: 4000    # Maximum characters for vehicle JSON summary
  top_vehicles_to_show: 3            # Number of top vehicles to include in prompts
  web_search_max_results: 3          # Maximum Tavily search results returned per query
  default_search_radius: 100         # Default search radius in miles when location provided but no explicit radius

# Interactive elements configuration
interactive:
  quick_replies:
    min_options: 0
    max_options: 4
    max_words_per_option: 5

  suggested_followups:
    min_options: 0
    max_options: 5
    max_words_per_phrase: 8

# Feature flags
features:
  enable_streaming: true             # Enable SSE streaming for progress updates
  require_photos: true               # Require photos in vehicle listings
  enable_quick_replies: true         # Enable quick reply buttons (potential answers)
  enable_suggested_followups: false  # Enable suggested followup questions
  use_local_vehicle_store: true      # Toggle to use local SQLite dataset instead of Auto.dev

# Recommendation method configuration
recommendation:
  method: "method3"                  # Recommendation method to use: "method1", "method2", "method3", "legacy"

  # Method 1: SQL + Dense Vector + BM25 + Clustered MMR
  method1:
    top_k: 20                        # Total vehicles to return
    strict_threshold: 1000           # Min vehicles before relaxing ALL filters to must_have only
    min_candidates: 1000             # Minimum candidates for effective ranking (backfill with dense if SQL < this)
    vector_limit: 1000               # Max candidates to rank with dense embeddings
    min_similarity: 0.4              # Minimum dense similarity score (0.0-1.0) to include in results
    lambda_param: 0.85               # MMR diversity parameter (0.0=pure diversity, 1.0=pure relevance)
    cluster_size: 5                  # Number of similar vehicles per cluster
    use_bm25: false                   # Enable BM25 sparse ranking
    bm25_beta: 0                     # BM25 weight (dense weight = 1 - beta). 0.3 = 30% BM25, 70% dense
    final_ranking_method: year_value       # Final ranking method: 'bm25' (keyword match), 'year_value' (year then mileage/price), 'none' (keep MMR order)

  # Method 2: Proxy Description → Multi-Filter Sets → Dense Ranking + MMR
  method2:
    top_k: 20                        # Total vehicles to return
    num_filter_sets: 10              # Number of distinct filter sets to generate
    lambda_param: 0.85               # MMR diversity parameter (0.0=pure diversity, 1.0=pure relevance)
    cluster_size: 5                  # Number of similar vehicles per cluster

  # Method 3: SQL + Coverage-Risk Optimization (Phrase-Level Semantic Alignment)
  method3:
    top_k: 20                        # Total vehicles to return
    lambda_risk: 0.5                 # Risk penalty weight in coverage-risk optimization (0.0=no penalty, 1.0=full penalty)
    min_similarity: 0.5              # Minimum phrase similarity threshold (0.0-1.0) to count alignment scores

  # Legacy method (current ReAct agent)
  legacy:
    max_items: 20

# API Configuration (Auto.dev specific - modify for other data sources)
api:
  base_url: "https://auto.dev/api"
  endpoints:
    search: "/listings"
  default_params:
    page_size: 20
    sort_by: "price"
    sort_order: "asc"
  timeout: 30

# Logging configuration
logging:
  level: "INFO"                      # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
